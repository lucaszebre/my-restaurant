<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Configuration du Restaurant</title>
    <style>
      body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f4; }
      .container { background-color: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); max-width: 600px; margin: auto; }
      h1 { color: #333; text-align: center; margin-bottom: 30px; }
      .form-group { margin-bottom: 15px; }
      label { display: block; margin-bottom: 5px; font-weight: bold; color: #555; }
      input[type="text"],
      input[type="url"],
      input[type="password"],
      input[type="color"] {
          width: calc(100% - 22px);
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          box-sizing: border-box;
      }
      input[type="file"] {
          padding: 5px 0;
      }
      input[type="color"] {
          height: 40px;
      }
      button {
          background-color: #007bff;
          color: white;
          padding: 10px 20px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 16px;
          display: block;
          width: 100%;
      }
      button:hover { background-color: #0056b3; }
      .error-message { color: red; font-size: 0.9em; margin-top: 5px; }
      .success-message { color: green; font-weight: bold; text-align: center; margin-bottom: 20px; }
      .error { border-color: red; }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Configuration du Restaurant</h1>

      <div th:if="${successMessage}" class="success-message">
        <p th:text="${successMessage}"></p>
      </div>
      <div th:if="${errorMessage}" class="error-message">
        <p th:text="${errorMessage}"></p>
      </div>

      <form
        th:action="@{/admin/config}"
        th:object="${restaurantConfig}"
        method="post"
        enctype="multipart/form-data"
      >
        <div class="form-group">
          <label for="restaurantName"
            >Nom du restaurant (Header & Titre des pages) :</label
          >
          <input
            type="text"
            id="restaurantName"
            th:field="*{restaurantName}"
            th:classappend="${#fields.hasErrors('restaurantName')} ? 'error'"
          />
          <p
            th:if="${#fields.hasErrors('restaurantName')}"
            th:errors="*{restaurantName}"
            class="error-message"
          ></p>
        </div>

        <div class="form-group">
          <label for="siteUrl">URL du site :</label>
          <input
            type="url"
            id="siteUrl"
            th:field="*{siteUrl}"
            placeholder="Ex: http://www.monsite.com"
            th:classappend="${#fields.hasErrors('siteUrl')} ? 'error'"
          />
          <p
            th:if="${#fields.hasErrors('siteUrl')}"
            th:errors="*{siteUrl}"
            class="error-message"
          ></p>
        </div>

        <div class="form-group">
          <label for="color">Couleur pour liens, menus, boutons, etc. :</label>
          <input
            type="color"
            id="color"
            th:field="*{color}"
            th:classappend="${#fields.hasErrors('color')} ? 'error'"
          />
          <p
            th:if="${#fields.hasErrors('color')}"
            th:errors="*{color}"
            class="error-message"
          ></p>
        </div>

        <div class="form-group">
          <label for="bannerPhoto">Photo de bannière (pour le header) :</label>
          <input
            type="file"
            id="bannerPhoto"
            th:field="*{bannerPhoto}"
            accept="image/*"
          />
          <p
            th:if="${#fields.hasErrors('bannerPhoto')}"
            th:errors="*{bannerPhoto}"
            class="error-message"
          ></p>
        </div>

        <div class="form-group">
          <label for="adminPassword">Mot de passe Administrateur :</label>
          <input
            type="password"
            id="adminPassword"
            th:field="*{adminPassword}"
            th:classappend="${#fields.hasErrors('adminPassword')} ? 'error'"
          />
          <p
            th:if="${#fields.hasErrors('adminPassword')}"
            th:errors="*{adminPassword}"
            class="error-message"
          ></p>
          <small>Min : 8 caractères, 1 minuscule, 1 majuscule, 1 nombre.</small>
        </div>

        <button type="submit">Enregistrer la Configuration</button>
      </form>
    </div>
  </body>
</html>
